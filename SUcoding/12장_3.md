## 이벤트 다루기

### 이벤트 종류

이벤트는 웹브라우저와 사용자 사이에 상호작용이 발생하는 특정 시점을 의미합니다.
이벤트가 발생하면 이벤트 종류에 따라 어떤 작업을 하거나 미리 등록한 함수를 호출하는 드으이 조작을 자바스크립트로 지정할 수 있습니다.

- 마우스 이벤트

  - onclick, ondbclick, onmouseover, onmouseout, onmousemove, onwheel

- 키보드 이벤트

  - onkeypress, onkeydown, onkeyup

- 포커스 이벤트
  - onfocus, onblur(요소가 포커스를 잃으면 발생)
- 폼 이벤트
  - onsubmit(폼이 전송될 때 발생)
- 리소스 이벤트
  - onload(웹브라우저의 리소스 로드가 끝나면 발생)

### 이벤트 등록하기

이벤트 등록은 크게 3가지 인라인, 프로퍼티 리스너, 이벤트 등록 메서드

1. 인라인 방식으로 이벤트 등록하기

<a href="./080313-main/080313-main/12/06/inline_event1.html" target="_blank">인라인 방식으로 이벤트 예제 코드</a>

```html
<button onclick="clickEvent()">클릭</button>
<script>
  function clickEvent() {
    alert("클릭");760px
  }
</script>
```

<a href="./080313-main/080313-main/12/06/inline_event2.html" target="_blank">인라인 방식으로 이벤트 예제 코드</a>

```html
<form>
  <input type="text" onfocus="focusEvent()" onblur="blurEvent()" />
  <script>
    function focusEvent() {
      console.log("focus on");
    }
    function blurEvent() {
      console.log("focus out");
    }
  </script>
</form>
```

포커스 이벤트를 사용할때 코드 내부에 alert() 메서드 사용하면 무한 반복현상

2. 프로퍼티 리스너 방식으로 등록하기

프로퍼티 리스너는 요소 노드에 직접 속성으로 이벤트를 등록하는 방법입니다

<a href="./080313-main/080313-main/12/06/property_listener.html" target="_blank">프로퍼티 리스너 방식 이벤트 예제 코드</a>

```html
<button class="propertyBtn">클릭</button>
<script>
  const btnEl = document.querySelector(".propertyBtn");
  btnEl.onclick(function () {
    alert("click");
  });

  btnEl.onclick = () => alert("arrow click");

  btnEl.onclick = clickEvent;
  function clickEvent() {
    alert("click");
  }
</script>
```

3. 이벤트 등록 메서드로 이벤트 등록하기

DOM 에서 addEventListener() 메서드를 사용해 이벤트를 등록할 수도 있습니다
3가지 방법 중 가장 권장하는 방식

```
<노드>.addEventListener("<이벤트 타입>","<이벤트 함수>")
```

```html
<button>클릭</button>
<script>
  const btn = document.querySelector("button");
  btn.addEventListener("click", function () {
    alert("button click");
  });

  const clickEvent = () => {
    alert("button click");
  };
  btn.addEventListener("click", clickEvent);
</script>
```

단, 함수 표현식으로 정의된 함수는 호이스팅에 의해 선언과 할당이 분리되므로 참조하려는 함수가 addEventListener() 메서드보다 반드시 위에 작성되어야 합니다

1분 퀴즈

6. 버튼을 더블 클릭하면 경고창이 출력되게 코드를 작성해 주세요. 이때, 경고창의 메시지는 아무거나 상관없습니다.

```html
<button>클릭</button>

<script>
  // 코드를 작성해 주세요.
</script>
<button class="btn1">클릭</button>

<script>
  const btn1 = document.querySelector(".btn1");
  btn1.ondblclick = () => {
    alert("ondblclick");
  };
</script>

정답
<button>클릭</button>
<script>
  document.querySelector("button").addEventListener("dblclick", function () {
    alert("dblclick!");
  });
</script>
```

```javascript
addEventListener("dblclick", (event) => {});

ondblclick = (event) => {};
```

## 이벤트 연습

```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
      crossorigin="anonymous"
    ></script>
    <title>Document</title>
    <style>
      .checkbox-group {
        display: flex;
        align-items: center;
        min-height: 40px;
        flex-flow: wrap;
      }

      .checkbox-group label {
        display: flex;
        align-items: center;
        margin-right: 30px;
      }

      .checkbox-group input[type="checkbox"] {
        position: relative;
        width: 18px;
        height: 18px;
        appearance: none;
        -webkit-appearance: none;
        padding-left: 25px;
        border: 0;
      }

      .checkbox-group input[type="checkbox"]:before {
        display: inline-flex;
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        border-radius: 3px;
        border: 1px solid #aaa;
        width: 18px;
        height: 18px;
        background: #fff;
      }

      .checkbox-group input[type="checkbox"]:checked:before {
        background: #336699 url(./images/i_checkbox_on.svg) center center
          no-repeat;
        border: 0;
      }

      .radio-group {
        display: flex;
        align-items: center;
        min-height: 40px;
        flex-flow: wrap;
      }

      .radio-group label {
        display: flex;
        align-items: center;
        margin-right: 30px;
      }

      .radio-group input[type="radio"] {
        position: relative;
        width: 18px;
        height: 18px;
        padding-left: 25px;
        appearance: none;
        -webkit-appearance: none;
      }

      .radio-group input[type="radio"]:before {
        display: inline-block;
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 18px;
        height: 18px;
        border: 1px solid #ccc;
        border-radius: 50%;
        background: #fff;
      }

      .radio-group input[type="radio"]:checked:before {
        background: #336699;
        border: 0;
      }

      .radio-group input[type="radio"]:checked:after {
        display: inline-block;
        content: "";
        position: absolute;
        top: 1px;
        left: 1px;
        width: 16px;
        height: 16px;
        border: 3px solid #fff;
        border-radius: 50%;
        background: #336699;
        box-sizing: border-box;
      }

      .bg-change-box {
        border: 2px solid #aaa;
        text-align: center;
        padding: 40px 0;
        background-color: #fff;
      }

      input[type="text"],
      input[type="password"] {
        display: block;
        border: 1px solid #ddd;
        height: 30px;
        border-radius: 5px;
        text-indent: 5px;
        margin: 2px 0;
      }

      pre {
        margin-top: 30px;
      }
    </style>
  </head>

  <body>
    <pre>- 클릭시 이벤트 취소</pre>
    <a class="link" href="https://wwww.naver.com">네이버 이동</a>
    <a class="link" href="https://wwww.daum.net">다음 이동</a>
    <script>
      const aLinks = document.querySelectorAll(".link");
      aLinks.forEach((el) => {
        el.addEventListener("click", function (e) {
          e.preventDefault();
        });
      });
    </script>

    <pre>- input에서 키다운했을때 키코드 및 키 입력을 boolean으로~</pre>
    <form>
      <input type="text" name="key" id="" />
    </form>
    <script>
      const inputKey = document.querySelector("input[name='key']");
      inputKey.addEventListener("keydown", (e) => {
        console.log(`keyCode : ${e.keyCode}`);
        console.log(`ctrlKey : ${e.ctrlKey}`);
        console.log(`altKey : ${e.altKey}`);
        console.log(`shiftKey : ${e.shiftKey}`);
      });
    </script>

    <pre>- 클릭하면 빨강 또 클릭하면 검정</pre>
    <p>text-1</p>
    <p>text-2</p>
    <p>text-3</p>
    <script>
      const pEls = document.querySelectorAll("p");
      pEls.forEach((el) => {
        el.style.cursor = "pointer";
        el.addEventListener("click", (e) => {
          if (e.target.style.color === "red") {
            e.target.style.color = "black";
          } else {
            e.target.style.color = "red";
          }
        });
      });
    </script>

    <pre>- 클릭시 pointerEvent 객체 속성 출력</pre>
    <button class="event">PointerEvent 객체 클릭</button>
    <script>
      const btnEvent = document.querySelector(".event");
      btnEvent.onclick = (e) => {
        console.log("== PointerEvent 객체 속성 출력 시작 ==");
        console.log(`clientX : ${e.clientX}`);
        console.log(`clientY : ${e.clientY}`);
        console.log(`pageX : ${e.pageX}`);
        console.log(`pageY : ${e.pageY}`);
        console.log(`screenX : ${e.screenX}`);
        console.log(`screenY : ${e.screenY}`);
        console.log("== PointerEvent 객체 속성 출력 끝 ==");
      };
    </script>

    <pre>- PointerEvent 객체 보기</pre>
    <button class="btn2">클릭 : PointerEvent</button>
    <script>
      const btnPointerEvent = document.querySelector(".btn2");
      btnPointerEvent.addEventListener("click", function (e) {
        //이벤트 객체
        console.log("이벤트 객체 :", e);
      });
    </script>

    <pre>
- 패스워드 다를 경우 확인 메세지 및 form에서 submit 사용방법 및 return</pre
    >

    <form name="register" action="ok.html" onsubmit="return jbSubmit()">
      <input type="text" name="username" placeholder="Username" />
      <input type="password" name="pw1" placeholder="Password" />
      <input type="password" name="pw2" placeholder="Confirm Password" />
      <input type="submit" value="가입" />
    </form>
    <br /><br /><br />
    <script>
      function jbSubmit() {
        const pw1 = document.register.pw1.value;
        const pw2 = document.register.pw2.value;
        if (pw1 !== pw2) {
          alert(`비밀번호와 확인 비밀번호가 다릅니다!`);
          return false;
        }
      }
    </script>

    <button class="propertyBtn">함수표현식 클릭</button>
    <script>
      const btnElw = document.querySelector(".propertyBtn");
      // btnElw.onclick = function () {
      //   alert("click");
      // }
      // btnEl.onclick = () => alert("arrow click");

      const addClick = () => {
        alert("click");
      };
      btnElw.addEventListener("click", addClick);

      // btnEl.onclick = clickEvent;
      // function clickEvent() {
      //   alert("click");
      // }
    </script>
    <form>
      <select>
        <option value="apple">사과</option>
        <option value="banana">바나나</option>
        <option value="orange">오렌지</option>
        <option value="melon">멜론</option>
      </select>
    </form>
    <form>
      <select class="bgChangeSelect">
        <option value="">배경선택</option>
        <option value="blue">blue</option>
        <option value="red">red</option>
        <option value="black">black</option>
      </select>
    </form>
    <div class="bg-change-box">Color Box</div>
    <script>
      const bgChangeSelect = document.querySelector(".bgChangeSelect");
      const bgChangeSelectOption = document.querySelectorAll(
        ".bgChangeSelect option"
      );
      const bgChangeBox = document.querySelector(".bg-change-box");
      bgChangeSelect.onchange = () => {
        bgChangeSelectOption.forEach((el) => {
          el.selected === true
            ? (bgChangeBox.style.backgroundColor = el.value)
            : undefined;
        });
      };
      // const changeColor = () => {
      //   bgChangeSelectOption.forEach((e) => {
      //     e.selected === true ? bgChangeBox.style.backgroundColor = e.value : undefined
      //   });
      // }
      // bgChangeSelect.addEventListener("change", changeColor);
    </script>

    <div class="checkbox-group">
      <label>
        <input type="checkbox" value="apple" />
        <span>사과</span>
      </label>
      <label>
        <input type="checkbox" value="banana" />
        <span>바나나</span>
      </label>
      <label>
        <input type="checkbox" value="orange" />
        <span>오렌지</span>
      </label>
      <label>
        <input type="checkbox" value="melon" />
        <span>멜론</span>
      </label>
    </div>
    <div class="radio-group">
      <label>
        <input type="radio" name="fruits" value="apple" />
        <span>사과</span>
      </label>
      <label>
        <input type="radio" name="fruits" value="banana" />
        <span>바나나</span>
      </label>
      <label>
        <input type="radio" name="fruits" value="orange" />
        <span>오렌지</span>
      </label>
      <label>
        <input type="radio" name="fruits" value="melon" />
        <span>멜론</span>
      </label>
    </div>
    <script>
      const radioEl1 = document.querySelectorAll("input[type='radio']");
      for (let i = 0; i < radioEl1.length; i++) {
        radioEl1[i].checked === true
          ? console.log(radioEl1[i].value)
          : undefined;
      }
    </script>

    <button onclick="clickEvent()">클릭</button>
    <script>
      function clickEvent() {
        alert("클릭");
      }
    </script>
    <form>
      <input type="text" onfocus="focusEvent()" onblur="blurEvent()" />
      <script>
        function focusEvent() {
          console.log("focus on");
        }
        function blurEvent() {
          console.log("focus out");
        }
      </script>
    </form>
    <button class="propertyBtn2">propertyBtn2 클릭</button>
    <script>
      const btnEl = document.querySelector(".propertyBtn2");
      btnEl.onclick = () => alert("click2");
    </script>

    <button class="btn1">더블클릭1</button>
    <button class="btn11">더블클릭11</button>
    <script>
      const btn1 = document.querySelector(".btn1");
      btn1.ondblclick = () => {
        alert("안뇽");
      };

      const btn11 = document.querySelector(".btn11");
      const dblclick = () => {
        alert("더블 클릭을 하였습니다");
      };
      btn11.addEventListener("dblclick", dblclick);
    </script>
  </body>
</html>
```

## 이벤트 객체와 this

**이벤트 객체**는 이벤트 타입에 따라 발생하는 이벤트의 각종 정보가 들어있는 객체 집합.
이벤트 객체는 개발자가 직접 생성하는 것이 아니라 이벤트가 발생하면 실행되는 함수의 매개변수로 같이 전달됩니다

### 이벤트 객체 사용하기

이벤트가 발생하면 실행되는 함수에는 내부적으로 이벤트 개규체가 매개변수로 전달됩니다.
원래 매개변수는 함수를 호출하는 쪽에서 데이터를 전달해야 받을 수 있지만, 이 코드에서 데이터를 전달하는 부분은 보이지 않습니다.
간단하게 이벤트 함수에는 이벤트 객체라는 데이터가 내부적으로 전달되어 호출된다고만 이해하면 됩니다

```html
<button>클릭 : PointerEvent</button>
<script>
  const btnPointerEvent = document.querySelector("button");
  btnPointerEvent.addEventListener("click", function (e) {
    //이벤트 객체
    console.log("이벤트 객체 :", e);
  });
</script>
```

매개변수를 사용해 이벤트 객체를 받아도되고 사용하지 않아도됩니다
하지만 매개변수를 사용해 이벤트 객체를 받으면 이벤트 객체를 활용할 수 있게 됩니다

- PointerEvent 객체의 주요 속성
  - clientX : 마우스가 클릭된 x좌표(수평 스크롤 포함x)
  - clientY : 마우스가 클릭된 Y좌표(수평 스크롤 포함x)
  - pageX : 마우스가 클릭된 x좌표(수평 스크롤 포함o)
  - pageY : 마우스가 클릭된 y좌표(수평 스크롤 포함o)
  - screenX : 모니터 왼쪽 위 모서리를 기준으로 마우스가 클릭된 x좌표
  - screeny : 모니터 왼쪽 위 모서리를 기준으로 마우스가 클릭된 y좌표

```html
<button class="event">PointerEvent 객체 클릭</button>
<script>
  const btnEvent = document.querySelector(".event");
  btnEvent.onclick = (e) => {
    console.log("== PointerEvent 객체 속성 출력 시작 ==");
    console.log(`clientX : ${e.clientX}`);
    console.log(`clientY : ${e.clientY}`);
    console.log(`pageX : ${e.pageX}`);
    console.log(`pageY : ${e.pageY}`);
    console.log(`screenX : ${e.screenX}`);
    console.log(`screenY : ${e.screenY}`);
    console.log("== PointerEvent 객체 속성 출력 끝 ==");
  };
</script>
```

- KeyboardEvent 객체의 주요 속성
  - keyCode : 키보드에서 눌린 키의 유니코드 값을 반환
  - ctrlKey : ctrl 키가 눌렸으면 true, 그렇지 않으면 false
  - altKey : alt 키가 눌렸으면 true, 그렇지 않으면 false
  - shiftKey : shift 키가 눌렸으면 true, 그렇지 않으면 false

```html
<form action="">
  <input type="text" name="key" id="" />
</form>
<script>
  const inputKey = document.querySelector("input[name='key']");

  inputKey.addEventListener("keydown", (e) => {
    console.log(`keyCode : ${e.keyCode}`);
    console.log(`ctrlKey : ${e.ctrlKey}`);
    console.log(`altKey : ${e.altKey}`);
    console.log(`shiftKey : ${e.shiftKey}`);
  });
</script>
```

### 이벤트 취소하기

preventDefault() 메서드

```html
<a href="https://www.naver.com" class="cancelLink" target="_blank">네이버</a>
<a href="https://www.daum.com" class="cancelLink" target="_blank">다음</a>
<script>
  document.querySelectorAll(".cancelLink").forEach((el) => {
    el.addEventListener("click", (e) => {
      e.preventDefault();
    });
  });
</script>
```

### this 키워드 사용하기

이벤트 함수가 화살표 함수일 때는 this가 window 객체를 가리키므로 target 속성을 사용해야합니다ㅣ
target 속성은 이벤트 발생 노드를 가리키는 이벤트 객체의 속성입니다

```html
<p>text-1</p>
<p>text-2</p>
<p>text-3</p>

<script>
  //this 출력
  document.querySelectorAll("p").forEach((el) => {
    el.addEventListener("click", function () {
      console.log(this);
    });
    //람다 사용할땐 e.target
    // el.addEventListener("click", (e) => {
    //   console.log(e.target)
    // })
  });
</script>

<script>
  const pEls = document.querySelectorAll("p");
  pEls.forEach((el) => {
    el.style.cursor = "pointer";
    el.addEventListener("click", (e) => {
      if (e.target.style.color === "red") {
        e.target.style.color = "black";
      } else {
        e.target.style.color = "red";
      }
    });
  });
</script>

<p class="btnColor">색 바꾸기1</p>
<p class="btnColor">색 바꾸기2</p>
<p class="btnColor">색 바꾸기3</p>
<script>
  const btnColor = document.querySelectorAll(".btnColor");
  btnColor.forEach((el) => {
    el.style.cursor = "pointer";
    el.addEventListener("click", function () {
      this.style.color === "red"
        ? (this.style.color = "black")
        : (this.style.color = "red");
    });
  });
</script>
```

1분 퀴즈

7. a 태그를 클릭해도 페이지가 이동하지 않도록 기본 이벤트를 제거하는 코드를 다음과 같이 작성했을 때 (가), (나)에 들어갈 내용으로 알맞은 것을 고르세요.

```html
<a href="https://www.gilbut.co.kr">길벗</a>

<script>
  const aEl = document.querySelector("a");
  aEl.addEventListener("click", function((가)){
     e.(나);
  })
</script>
```

e / preventDefault()

`해설_ 이벤트 객체의 매개변수 이름은 마음대로 지정해도 됩니다. 단, 문제에서는 이벤트 함수 내부에서 e라는 변수명을 참조하므로 (가)는 e가 되어야 합니다. 그리고 기본 이벤트를 취소하므로 (나)에는 preventDefault() 메서드가 들어가야 합니다.`
