## 노드 추가/삭제

```
문서객체모델
DOM 트리에서 새로운 노드를 생성하고,
생성한 노드를 기존 DOM 트리와 연결하면 동적으로 새로운 요소를 화면에 추가 가능.
```

### 노드 추가하기

- 노드 생성
  - createElement() : 요소 노드를 생성합니다.
  - createTextNode() : 텍스트 노드를 생성합니다.
  - createAttribute() : 속성 노드를 생성합니다.
- 노드 연결
  - <기준노드>.appendChild(<자식노드>) : 기준 노드에 자식 노드를 연결합니다.
  - <기준노드>.setAttribute(<속성노드>) : 기준 노드에 속성 노드를 연결합니다.

<a href="./080313-main/080313-main/12/04/node_basic.html" target="_blank">DOM 트리</a><br>

```html
<!DOCTYPE html>
  <head>
    <title></title>
  </head>
  <body>
    <script>
      //요소 노드 생성하기
      //요소 노드 생성
      const aEl = document.createElement("a");
      //바디에 자식 노드 연결
      document.body.appendChild(aEl);
      //생성 된 요소 노드에 class 추가
      aEl.classList.add("aEl");
      // aEl.setAttribute("class","aEl")
      //텍스트 노드 생성
      const textEl = document.createTextNode("네이버");
      //변수 선언
      const el = document.querySelector(".aEl");
      //생성된 요소 노드 안에 생성된 텍스트 노드 추가
      el.appendChild(textEl);
      //속성 추가
      el.setAttribute("href","https://www.naver.com");
      el.setAttribute("target","_blank");
      el.style.cssText = "display:block;text-align:center;";

    </script>
  </body>
</html>
```

<a href="https://thebook.io/080313/part03/ch12/04/01-03/" target="_blank"><img src="https://thebook.io/img/080313/482_2.jpg"></a>

<a href="https://thebook.io/080313/part03/ch12/04/01-05/" target="_blank"><img src="https://thebook.io/img/080313/483_2.jpg"></a>

### 노드 삭제하기

- <부모 노드>.removeChild(<자식 노드>)
  - 삭제는 항상 부모 노드에서 removeChild() 메서드를 사용
  - 따라서 부모를 반환하는 parentNode 속성으로 부모 노드에 접근해서 삭제

<a href="./080313-main/080313-main/12/04/removeChild.html" target="_blank">노드 삭제 예제 코드</a><br>
<a href="./080313-main/080313-main/12/04/removeChildAll.html" target="_blank">노드 전체 삭제 예제 코드</a>

```html
<p>text 1</p>
<a href="#">네이버</a>
<a href="#">다음</a>
<a href="#">라이코스</a>
<script>
  // p 요소 노드 삭제
  const pEl = document.querySelector("p");
  pEl.parentNode.removeChild(pEl);

  //a 요소 노드 삭제
  const aEl = document.querySelector("a");
  aEl.parentNode.removeChild(aEl);
  //a 요소 노드 모두 삭제
  const childNodes = document.body.childNodes;
  childNodes.forEach((e) => {
    //nodeName 속성은 html 요소를 대문자로 저장
    if (e.nodeName === "A") {
      e.parentNode.removeChild(e);
      const nEl = document.createElement("A");
      nEl.innerText = "링크가 삭제 되었습니다.";
    }
  });
  //연습1
  const bodyNode = document.body.childNodes;
  bodyNode.forEach((e) => {
    e.nodeName === "A" ? e.parentNode.removeChild(e) : undefined;
  });
  //연습2
  const childNodes1 = document.body.childNodes;
  let i = 1;
  childNodes1.forEach((e) => {
    //nodeName 속성은 html 요소를 대문자로 저장
    if (e.nodeName === "A") {
      e.parentNode.removeChild(e);
      const nEl = document.createElement("div");
      document.body.appendChild(nEl);
      nEl.innerText = `${i}번째 ${e.nodeName}가 삭제 되었습니다.`;
      i++;
    }
  });
  //연습3
  document.body.childNodes.forEach((e) => {
    e.nodeName === "A" ? e.parentNode.removeChild(e) : undefined;
  });
</script>
```

1분 퀴즈<br> 4. HTML 문서에 img 태그를 추가하려고 합니다.
이때, 이미지 경로는 ‘sample.jpg’, 이미지 설명은 ‘샘플 이미지’라고 지정하려고 할 때,
다음 코드의 A, B, C, D에 들어 갈 내용으로 알맞은 것을 고르세요.

```javascript
const imgEl = document.createElement("img");
imgEl.src = "sample.jpg";
imgEl.alt = "샘플 이미지";
document.body.appendChild(imgEl);
```

```html
<script>
  const img = document.(A);
  img.(B) = "sample.jpg";
  img.(C) = "샘플 이미지";
  document.body.(D)(img);
</script>
```

`4번 해설_ 요소 노드는 createElement() 메서드로 생성합니다. 그리고 img 태그의 속성 경로와 설명은 src 속성과 alt 속성으로 지정합니다. 마지막으로 생성한 요소 노드를 HTML 문서에 추가할 때는 appendChild() 메서드를 사용합니다.`

## 폼 조작하기

html의 폼(form)을문서 객체 모델을 이용해 제어하는 방법을 배워 보겠습니다

### form 태그 선택하기

form 태그는 forms 속성과 name 속성으로 선택할 수 있습니다

- forms 속성 사용하기

<a href="./080313-main/080313-main/12/05/forms.html" target="_blank">forms 속성 예제 코드</a><br>

```html
<form>
  <input type="text" name="userId" />
</form>
<form>
  <input type="text" name="userName" />
</form>
<form>
  <input type="text" name="userNick" />
</form>
```

<a href="https://thebook.io/080313/part03/ch12/05/01-01/" target="_blank"><img src="https://thebook.io/img/080313/488_1.jpg"></a>

이때 htmlCollection 객체는 유사 배열이라서 인덱스를 사용해 form 요소 노드에 하나씩 접근 가능.<br>
하지만 forms 속성을 사용하는 방법은 form 태그의 위치가 바뀌면 잘못 참조하게 되어 예기치 않게 오류 발생 가능.
`document.forms[0]`<br>`그래서 name 속성 사용`

- name 속성 사용하기

```html
<form name="frm1">
  <input type="text" />
</form>
<form name="frm2">
  <input type="text" />
</form>
<form name="frm3">
  <input type="text" />
</form>
```

```
document.frm1;//form 태그의 name 속성값이 frm1인 노드
document.frm2;//form 태그의 name 속성값이 frm2인 노드
document.frm3;
```

<a href="https://thebook.io/080313/part03/ch12/05/01-02/" target="_blank"><img src="https://thebook.io/img/080313/489.jpg"></a>

### 폼 요소 선택하기

폼요소에는 input textarea select button 등이 있습니다<br>
이런 폼 요소를 선택할 때는 elements 속성이나 name 속성을 사용

<a href="./080313-main/080313-main/12/05/forms_element.html" target="_blank">폼 요소 선택 예제 코드</a><br>

```html
<form name="frm1">
  <label for=""><input type="text" name="uname" /></label>
  <label for=""><input type="text" name="age" /></label>
  <label for="">
    <select name="gender">
      <option value="male">male</option>
      <option value="female">female</option>
    </select>
  </label>
  <textarea name="desc"></textarea>
</form>
```

```javascript
document.frm1.uname;
document.frm1.age;
document.frm1.gender;
```

### 폼 요소의 입력값 다루기

사용자에게 값읋 입력 받는 대표적인 폼 요소로는 input 태그와 select 태그가 있습니다

- 한 줄 입력 요소 다루기

```javascript
document.frm1.uname.value;
document.frm1.age.value;
document.frm1.uname.value = "Mike";
document.frm1.age.value = "30";
```

- 여러 줄 입력 요소 다루기 : textarea

```javascript
document.frm1.desc.value = "setting";
```

<a href="https://thebook.io/080313/part03/ch12/05/03-02/" target="_blank"><img src="https://thebook.io/img/080313/494_2.jpg"></a>

- 체크박스 다루기

<a href="./080313-main/080313-main/12/05/checkbox.html" target="_blank">체크박스 예제 코드</a><br>

<form>
  <div class="checkbox-group">
    <label><input type="checkbox" value="apple"> <span>사과</span></label>
    <label><input type="checkbox" value="banana"> <span>바나나</span></label>
    <label><input type="checkbox" value="orange"> <span>오렌지</span></label>
    <label><input type="checkbox" value="melon"> <span>멜론</span></label>
  </div>
</form>
<style>
  .checkbox-group{display:flex;align-items:center;flex-flow:wrap;}
  .checkbox-group label{display:flex;align-items:center;margin-right:20px;}
  .radio-group{display:flex;align-items:center;flex-flow:wrap;}
  .radio-group label{display:flex;align-items:center;margin-right:20px;}
  input[type='checkbox'],
  input[type='radio']{position:relative;appearance:none;-webkit-appearance:none;padding-left:25px;width:18px;height:18px;}
  input[type='checkbox']:before{display:inline-flex;content:"";position:absolute;left:0;top:0;width:18px;height:18px;border-radius:3px;border:1px solid #ddd;box-sizing:border-box;margin-top:2px;}
  input[type='checkbox']:checked:before{background: #336699 url(./images/i_checkbox_on.svg) center center no-repeat;border:0;}
  input[type='radio']:before{display:inline-flex;content:"";position:absolute;left:0;top:0;width:18px;height:18px;border-radius:50%;border:1px solid #ddd;box-sizing:border-box;}
  input[type='radio']:checked:before{background:#336699;border:0;}
  input[type='radio']:checked:after{display:inline-flex;content:"";width:16px;height:16px;border:2px solid #fff;background:#336699;position:absolute;left:1px;top:1px;border-radius:50%;box-sizing:border-box;}
</style>

```javascript
//vanilla
const checkboxEls = document.querySelectorAll("input[type='checkbox']");
for (let i = 0; i < checkboxEls.length; i++) {
  if (checkboxEls[i].checked === true) {
    console.log(checkboxEls[i].value);
  }
}

let els = document.querySelectorAll("input[type='checkbox']:checked");
let arrs = [...els];
let items = arrs.map((arr) => {
  return arr.value;
  6;
});
console.log(arrs);
console.log(items);

const checkboxEls = document.querySelectorAll("input[type='checkbox']");
checkboxEls.forEach((e) => {
  e.checked === true ? console.log(e.value) : undefined;
});

//jquery
$("input[type=checkbox]:checked").each(function () {
  console.log($(this).val());
});

const checkboxEl = $("input[type=checkbox]:checked");
checkboxEl.each(function () {
  console.log($(this).val());
});

let items = [];
checkboxEl.each(function () {
  items.push($(this).val());
});
console.log(items);

//map
let items = checkboxEl
  .map(function () {
    return this.value;
  })
  .get();
console.log(items);

let items = $("input[type=checkbox]:checked").map(function () {
  return this.value;
});
console.log(items);

//map 예제
var numbers = [1, 4, 9];
var doubles = numbers.map((num) => {
  return num * 2;
});
console.log(doubles);
console.log(numbers);

//모든 체크박스 체크표시
const checkboxEls = document.querySelectorAll("input[type='checkbox']");
for (let i = 0; i < checkboxEls.length; i++) {
  checkboxEls[i].checked = true;
}
```

- 라디오버튼 다루기

<a href="./080313-main/080313-main/12/05/radio.html" target="_blank">라디오버튼 예제 코드</a>

<a href="./080313-main/080313-main/12/05/radio_set.html" target="_blank">체크박스 선택상태 예제 코드</a>

<form>
<div class="radio-group">
  <label><input type="radio" name="fruits" value="apple"> <span>사과</span></label>
  <label><input type="radio" name="fruits" value="banana"> <span>바나나</span></label>
  <label><input type="radio" name="fruits" value="orange"> <span>오렌지</span></label>
  <label><input type="radio" name="fruits" value="melon"> <span>멜론</span></label>
  </div>
</form>

```javascript
//for 문
const radioEls = document.querySelectorAll("input[type='radio']");
for (let i = 0; i < radioEls.length; i++) {
  radioEls[i].checked === true ? console.log(radioEls[i].value) : undefined;
}
//forEach문
const radioEls = document.querySelectorAll("input[type='radio']");
radioEls.forEach((e) => {
  e.checked === true ? console.log(e.value) : undefined;
});

//선택상태
const radioEls = document.querySelectorAll("input[type='radio']");
radioEls.forEach((e) => {
  if (e.value === "apple") {
    e.checked = true;
  }
});
```

- 콤보박스 다루기

<a href="./080313-main/080313-main/12/05/select.html" target="_blank">콤보박스 예제 코드</a>

<a href="./080313-main/080313-main/12/05/select_set.html" target="_blank">콤보박스 선택상태 예제 코드</a>

<form>
  <select>
    <option value="apple">사과</option>
    <option value="banana">바나나</option>
    <option value="orange">오렌지</option>
    <option value="melon">멜론</option>
  </select>
</form>

```javascript
const optionEls = document.querySelectorAll("option");
optionEls.forEach((e) => {
  e.selected === true ? console.log(e.value) : undefined;
});

//선택상태
const optionEls = document.querySelectorAll("option");
optionEls.forEach((e) => {
  e.value === "melon" ? (e.selected = true) : undefined;
});
```

- 파일 업로드 요소 다루기

<a href="./080313-main/080313-main/12/05/fileupload.html" target="_blank">파일 업로드 요소 예제 코드</a>

<form name="frm">
  <input type="file" name="upload">
</form>

파일 업로드 요소에서 핵심은 files 속성으로 반환되는 FileList 객체 입니다.

```javascript
const filesObj = document.frm.upload.files;
console.log(filesObj);
```

FileList 객체가 반환됩니다. FileList 객체는 파일 업로드 요소로 선택한 파일에 대한 다양한 정보를 담고 있는 객체입니다.
그래서 FileList 객체의 속성에 접근하면 다음과 같은 여러 정보를 가져올 수 있습니다.

```javascript
const files = document.frm.upload.files;
files[0].name; //파일 이름
files[0].size; //파일 크기
files[0].type; //파일 타입
files[0].lastModifiedDate; //파일 마지막 수정일
```

<a href="https://thebook.io/080313/part03/ch12/05/03-10/" target="_blank"><img src="https://thebook.io/img/080313/500.jpg"></a>

- 폼 요소 관련 기타 메서드 : 폼 요소를 다룰 때 속성 말고도 유용하게 사용할 수 있는 메서드가 있습니다.
  - submit() : 폼 요소의 값을 전송(submit)합니다.
  - focus() : 폼 요소에 포커스를 이동합니다.

<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement" target="_blank">폼 요소 관련 메서드</a>

1분 퀴즈

5. 다음 코드의 입력 항목 중 나이 항목의 값을 가져오는 코드를 고르세요.

<form name="frm1">
  <label for="uname">이름</label>
  <input type="text" id="uname" name="uname">
  <label for="age">나이</label>
  <input type="text" id="age" name="age">
  <button type="submit">전송</button>
</form>

① document.frm1.age.value

② document.forms.age.value

③ document.forms[0].uname.value

④ document.frm1.elements[0].value

⑤ document.forms[0].elements[0].value

```javascript
const ageEl = document.querySelector("#age");
ageEl.value;
```

`정답 : 1 / 해설_ document 객체를 사용하면 form 태그의 name 속성값을 이용해 특정 form 요소 노드에 접근할 수 있습니다. form 요소 노드에 접근한 뒤에는 하위 노드들의 name 속성값으로 원하는 입력 요소를 선택하고 value 속성으로 입력값을 가져오면 됩니다.`
