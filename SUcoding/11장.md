# 11장 자바스크립트 객체 다루기

## 객체란

키와 값으로 구성된 속성의 집합<br>
const person = {};

## 객체 속성 다루기

### 객체 속성에 접근하기

```javascript
const person = {
  name: "Sucoding",
  age: 20,
  "phone number": 010, //이 경우 반강제적으로 대괄호 연산자를 사용하여 출력
};
//객체 속성 출력
console.log(person.name); //마침표 연산자
console.log(person["age"]); //대괄호 연산자
console.log(person["phone number"]); //대괄호 연산자 사용 필수
```

- 객체에 접근하는 크게 두가지 방법

1. 객체 이름.키 속성 : 마침표 연산자
1. 객체 이름['키'] : 대괄호 연산자

1. _key 이름에 공백에 있을 경우 " " 로 감싸주는데 이 경우는 반강제적으로 대괄호 연산자로 출력해야함_

```javascript
const person = {
  //키 name의 속성은 객체리터럴
  name: {
    firstName: "Gildong",
    lastName: "Hong",
  },
  likes: ["apple", "samsung"],
  printInfo: function (msg) {
    console.log(msg);
  },
};
console.log(person["name"]["firstName"]);
console.log(person["likes"][0]);
person["printInfo"]("Hi");
```

`객체 속성에 접근할 때 대괄호 연산자와 마침표 연산자 중 어느 방법을 사용하더라도 상관없음`

### 객체 속성 값 변경하기

객체로 정의된 값을 바꾸고 싶다면 키로 속성에 접근해서 값을 재할당하면 됩니다.
다음 코드는 변수 person에 할당된 객체의 속성에 키로 접근해 값을 변경합니다

```javascript
const person = {
  name: "Tom",
};
person.name = "Mike"; //person["name"] = "Mike";
person.name; //"Mike"
```

### 객체 속성 동적으로 추가하기

```javascript
const person = {};
person; //{}
person.name = "Mike"; //person["name"] = "Mike";
person.name; //"Mike"
```

### 객체 속성 동적으로 삭제하기

```javascript
const person = {
  name: "Tom",
};
console.log(person);
delete person.name;
console.log(person);
```

### 객체의 데이터 관리 방법 이해하기

```
const 키워드로 선언한 상수 변수는 재할당이 불가능
const 키워드로 선언한 상수 변수에 할당한 객체에 속성을 추가하거나 삭제가능
이는 객체 자료형의 특성인 참조(reference) 때문
```

**자바스크립트의 자료형 구분**

1. 기본 자료형
1. 참조 자료형

_자료형을 기본 자료형과 참조 자료형으로 나누는 이유는 데이터 관리 방식이 다르기 때문_

1. 기본 자료형의 데이터 관리: 깊은 복사

- 기본 자료형은 변수에 데이터를 할당할 때 데이터 그 자체가 할당.

```javascript
let num = 10;
let copyNum = num;
console.log(num); //10
console.log(copyNum); //10
num = 20; //변수 num을 재할당
console.log(num); //20
console.log(copyNum); //10
```

_이렇게 복사한 값을 재할당할때 한쪽 데이터가 변경되어도 서로 영향을 미치지 않게 복사되는 것을 깊은 복사라고 합니다_

2. 참조 자료형의 데이터 관리: 얕은 복사

- 기본 자료형과 다르게 객체와 같은 참조 자료형은 변수 공간에 데이터가 할당되는 것이 아니고, 데이터가 위치하고 있는 메모리의 주소 값만 할당.
- 자바스크립트에서는 이를 **참조한다**고 표현
- 그래서 다음 처럼 변수 person에 객체를 저장하면 객체의 데이터는 별도의 메모리에 저장되고 변수는 person은 객체의 데이터가 저장된 메모리 주소만 가지고 있게 됩니다

```javascript
//메모리 주소 0x00만 가지고 있음
const person = {
  name: "Mike",
};
person = {
  name: "Tom",
}; //const 키워드는 재할당이 안되므로 Error

//하지만 변수에 할당된 객체에 속성을 추가하거나 값을 변경하는건 가능
person.name = "Tom";
```

- 변수 person 입장에서는 데이터를 재할당하는것이 아니기 때문
- 객체의 주소 값은 그대로이고 주소 값이 참조하는 원본 객체 데이터만 변경되기 때문에 기존 데이터를 변경하거나 새로운 속성을 추가할 수 있음
- 이러한 특징은 변수끼리 데이터를 복사할 때 도드라지게 나타남

```javascript
const person = {
  name: "Mike",
};
const copyPerson = person; // 변수 person에 할당된 객체를 copyPerson에 복사
person.name = "Tom"; //변수 person에 할당된 객체의 값을 변경
console.log(person.name); //Tom
console.log(copyPerson.name); //Tom
```

- person에 할당된 객체의 속성값을 변경했는데 copyPerson에 복사된 객체의 속성까지 변경됨
- 이는 객체가 변수에 할당될 때 변수는 주소 값만 가지고 있어서 복사 할 때도 주소 값만 복사하기 때문
- 그래서 두 변수는 같은 주소 값을 가지게 되고 바라보는 원본 데이터의 위치도 값음
- 그러므로 변수 person의 데이터를 변경하면 같은 주소를 바라보는 변수 copyPerson의 데이터까지 변경
- 이렇게 데이터를 복사했 을때 한쪽 데이터가 변경되면 다른쪽도 변경되어 서로 영향 받는 것을<br>**얕은복사**라고 한다.

`1분퀴즈`

1. 다음 코드를 실행한 후 마지막에 변수 studentObject에 할당된 객체의 키를 배열로 나열한 값을 고르세요.

```javascript
const studentObj = {
  name: "John",
  age: 20,
};
studentObj.gender = "female";
delete studentObj.age;
```

["name","gender"] ? O

## 표준 내장 객체 사용하기

```
표준 내장 객체 : 자바스크립트에 기본으로 내장된 객체
String 객체와 Array 객체가 있음
```

### 문자열을 다루는 String 객체

**속성**

- length : 문자열의 길이를 반환

```javascript
let pw = "123";
if (pw.length < 4) {
  console.log("비밀번호는 최소 4자리 이상 입력해주세요");
}
```

**메서드**

- includes() : 메서드의 매개변수에 인자로 전달되는 문자열이 대상 문자열에 포함되어 있으면 true, 아니면 false.

```javascript
const email = "test!naver.com";
if (!email.includes("@")) {
  console.log("올바른 이메일 형식이 아닙니다.");
}
```

- replace() : 대상 문자열에서 메서드의 매개변수에 인자로 전달되는 문자열과 일치하는 한 부분을 찾아서 다른 데이터로 변경한 새로운 문자열을 반환

- replaceAll() : 대상 문자열에서 메서드의 매개변수에 인자로 전달되는 문자열과 일치하는 모든 부분을 찾아서 다른 데이터로 변경한 새로운 문자열을 반환

- split() : 메서드의 매개변수에 인자로 전달되는 구분자를 이용해 대상 문자열을 여러개의 문자열로 분리하고 분리한 문자열을 새로운 배열로 반환

- toUpperCase() : 대상 문자열을 대문자로 변경해 반환

- trim() : 대상 문자열의 앞뒤 공백을 제거한 값을 반환.

- indexOf() : 대상 문자열과 일치하는 첫번째 문자의 인덱스를 반환.

```javascript
const email = "test!naver.com";
if (email.indexOf("@") < 0) {
  //찾지 못하면 -1을 반환
  console.log("올바른 이메일 형식이 아닙니다.");
}
```

### 배열을 다루는 Array 객체

```
Array 객체는 기본 자료형 중 배열을 다루는 객체로, 배열에서 사용할 수 있는 많은 속성과 메서드가 정의되어 있습니다
```

**속성**

- length : 배열의 요소 개수를 반환.

```javascript
const arr = [10, 20, 30];
for (let i = 0; i < arr.length; i++) {
  console.log(arr[i]);
}
```

**파괴적 메서드** `원본데이터를 변경하는 메서드`

- push() : 배열의 맨 뒤에 데이터를 추가.
- pop() : 배열의 맨 뒤에서 데이터를 추출.
- unshift() : 배열의 맨 앞에 데이터를 추가.
- shift() : 배열의 맨 앞에서 데이터를 추출.
- sort() : 배열의 요소를 정렬.
- reverse() : 배열의 요소를 역순으로 정렬.

```javascript
const arr = [10, 20, 30, 40];
arr.push(50); //배열 맨 뒤에 50을 추가
console.log(arr); //[10,20,30,40,50]
arr.pop(); //배열 맨 뒤에서 요소 추출
console.log(arr); //[10,20,30,40]
arr.unshift(0); //배열 맨 앞에 0을 추가
console.log(arr); //[0,10,20,30,40]
arr.shift(); //배열 맨 앞에서 요소 추출
console.log(arr); //[10,20,30,40]
```

**비파괴적 메서드** `원본을 변경하지 않기 때문에 arr 변수에 할당된 배열 데이터는 그대로 보존`

- forEach() : 배열의 요소를 하나씩 순회하면서 요소마다 콜백(callback) 함수를 호출.

```javascript
const arr = [10, 20, 30, 40];
arr.forEach((e) => {
  console.log(e);
});
console.log(arr);
```

- filter() : 배열의 요소를 하나씩 순회하면서 요소마다 콜백 함수를 호출해 true 를 반환하는 요소만 추출. 추출한 요소로 새로운 배열을 만들고 만들어진 배열을 반환.
- find() : 배열의 요소를 탐색하면서 주어진 판별 함수를 만족하는 첫번쨰 값을 반환.
- findIndex() : 값 대신 인덱스 숫자를 반환한다는 것만 뺴면 find() 메서드와 동일.
- includes() : 배열에 특정 값이 포함되어 있는지 확인해서 포함됐으면 true, 아니면 false.
- join() : 배열의 모든 요소를 주어진 구분자로 합침.

### 날짜와 시간을 다루는 Date 객체

- 인스턴스 만들기

```
인스턴스
어떤 등급에 속하는 각 객체를 인스턴스라고 한다. <br>예를 들면 ‘목록(list)’이라는 등급을 정의하고 <br>그 다음에 ‘본인 목록(my list)’이라는 객체를 생성(기억 장치 할당)하면 <br>그 등급의 인스턴스가 생성된다
```

```javascript
const date = new Date();
date;
```

이때 생성되는 데이터를 자바스크립트에서는 인스턴스라고 하고 한다. 따라서 date 변수에 할당된 데이터는 Date 객체의 인스턴스입니다

```javascript
//1월=0, 12월=11
const date1 = new Date(2023, 11, 25);
date1; //Mon Dec 25 2023 00:00:00 GMT+0900 (한국 표준시)
//문자열 전달
const date2 = new Date("2023-12-25");
date2; //Mon Dec 25 2023 09:00:00 GMT+0900 (한국 표준시)
```

- 메서드로 날짜와 시간 정보 가져와서 설정하기

  - Date 객체에서 제공하는 메서드를 사용해서 간단히 가공.
  - get 메서드(날짜와 시간 정보를 가져오기)
  - set 메서드(날짜와 시간 정보를 설정하기)

- Date 객체의 인스턴스에 get 메서드를 사용하면 날짜와 시간을 재구성할 수 있다

```javascript
const date = new Date(2022, 11, 25, 18, 30, 50);
const dateFormat = `${date.getFullYear()}-${
  date.getMonth() + 1
}-${date.getDate()}-${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;
console.log(dateFormat);
```

- 날짜 간격 계산하기
  - Date 객체에서 제공하는 메서드 중 getTime() 메서드는 다음과 같이 1970년 1월1일 12:00이후의 시간을 밀리초 단위로 반환.

```javascript
const date = new Date().getTime();
```

이러한 반환 결과를 활용하면 두 날짜 사이의 간격을 구할 수 있다.

```javascript
const date1 = new Date("2022-12-23");
const date2 = new Date("2022-12-25");
const dateDiff = date2.getTime() - date1.getTime();
const interval = dateDiff / (24 * 60 * 60 * 1000);
console.log(`두 날짜의 차이는 ${interval}일 입니다`);
```

1. Date 객체로 날짜 데이터인 인스턴스를 생성
2. 두 인스턴스에 getTime() 메서드를 사용하면 날짜가 밀리초 단위로 반환
3. 더 큰 숫자인 미래 날짜에서 과거 날짜를 뺀다.
4. 두 날짜 사이의 간격을 밀리초로 구할 수 있다.
5. 이렇게 구한 밀리초를 24(시간) _ 60(분) _ 60(초)로 나누면 두 날짜 사이의 간격을 일수로 환산

### 수학 연산을 다루는 Math 객체

- Math.floor() : 내림
- Math.ceil() : 올림
- Math.round() : 반올림
- Math.random() : 0 이상 1 미만의 난수를 반환

```javascript
const num = 10.52;
Math.floor(num); //10
Math.ceil(num); //11
Math.round(num); //11
```

- 난수 구하기
  - 난수 범위를 0이상 20이하의 정수로 바꾸고 싶다
  - 0.999 라는 수가 나왔을떄 여기에 20을 곱하면 19.98이 되고
  - 여기에 다시 floor() 메서드를 사용하면 19가 나옴

```javascript
function randomNum(num) {
  return Math.floor(Math.random() * num) + 1;
}
const maxRandom = randomNum(20);
console.log(maxRandom);
// class Random {
//   constructor(num) {
//     this.num = num;
//   }
//   randomNum() {
//     return Math.floor(Math.random() * this.num) + 1;
//   }
// }
// const num = new Random(20);
// num.randomNum();
```

- 난수의 최솟값 정하기

```javascript
function getMinMaxRandom(min, max) {
  return Math.floor(Math.random() * (max - min)) + 1 + min;
}
const maxRandom = getMinMaxRandom(10, 20);
console.log(maxRandom);
```

`1분 퀴즈` <br> 2. 다음 배열의 요소 중 가장 큰 수를 출력하는 코드를 완성하세요.

```javascript
const arr = [10, 120, 30, 50, 20];
arr.sort((a, b) => {
  return b - a;
});
// arr.sort((a, b) => {
//   return a < b ? 1 : a > b ? -1 : 0;
// });
console.log(arr[0]);

//정답
// const arr = [10, 120, 30, 50, 20];
// arr.sort(function(a, b){
//   if(a < b) return 1;
//   else if(a > b) return -1;
//   else return 0;
// })
// console.log(arr[0]);
```

## 브라우저 객체 모델 사용하기

- 표준 내장 객체는 자바스크립트에 내장된 객체
- 웹 브라우저에서 제공하는 객체를 **브라우저 객체모델**이라고 한다
- 최상위에 window
  - document(form,cookie,links/anchors,images)
  - location
  - history
  - navigation
  - screen

### window 객체의 속성과 메서드

- 속성

  - innerWidth : 웹브라우저 화면의 너비
  - innerHeight : 웹브라우저 높이
  - outerWidth : 웹브라우저 창의 너비
  - outerHeight : 웹브라우 창의 높이
  - screenTop / screenY : 웹브라우저 위쪽 면과 모니터의 간격
  - screenLeft / screenX : 웹브라우저 왼쪽 면과 모니터의 간격
  - pageXOffset / scrollX : 웹브라우저의 수평 스크롤 위치
  - pageYOffset / scrollY : 웹브라우저의 수직 스크롤 위치

`IE 버전 고려하려면(호환성) : screenY, screenX, scrollX, scrollY `

- 메서드

  - alert() : 알림창
  - confirm() : 확인창
  - prompt() : 입력창
  - open() : 새로운 웹브라우저 창 열기
  - close() : 웹브라우저 창 닫기
  - setTimeout() : 일정 시간 뒤에 콜백 함수를 한번만 실행
  - setInterval() : 일정 시간 마다 콜백 함수를 반복적으로 실행
  - clearInterval : setInterval() 메서드로 반복 실행되는 함수를 중지
  - scrollTo() : 웹브라우저의 스크롤을 특정위치만큼 이동
  - scrollBy() : 웹브라우저의 스크롤을 현재 위치에서 상대적 위치로 이동

<button onclick="printInfo()">window 객체 속성 출력</button>

```javascript
function printInfo() {
  console.log(`웹브라우저의 넓이 : ${innerWidth}`);
  console.log(`웹브라우저의 높이 : ${innerHeight}`);
  console.log(`웹브라우저의 창 넓이 : ${outerWidth}`);
  console.log(`웹브라우저의 창 높이 : ${outerHeight}`);
  console.log(`웹브라우저의 창 위쪽 면과 모니터의 간격 : ${screenY}`);
  console.log(`웹브라우저의 창 왼쪽 면과 모니터의 간격 : ${screenX}`);
  console.log(`웹브라우저의 수평 스크롤 : ${scrollX}`);
  console.log(`웹브라우저의 수직 스크롤 : ${scrollY}`);
}
```

### 웹브라우저에서 새창 제어하기

- window.open("경로","이름","속성")

<button onclick="popup()">팝업</button>
<button onclick="window.close()">팝업닫기</button>

```javascript
function popup() {
  window.open("open.html", "팝업", "width=200,height=200");
}
```

### 웹브라우저의 스크롤 이동하기

- window.scrollTo(x좌표,Y좌표)
- window.scrollBy(x좌표,Y좌표)

```javascript
window.scrollTo(100, 200);
window.scrollBy({ top: 500, left: 0, behavior: "smooth" });
```

1분 퀴즈

3. 메서드를 호출할 때마다 웹 브라우저의 스크롤을 가로 방향으로 200px,
   세로 방향으로 400px씩 계속 이동하게 하려고 합니다. A에 들어갈 내용으로 맞는 것을 고르세요.

window.(A)(200, 400);

```javascript
window.scrollBy(200, 400);
```

## 마무리

1. 객체 : 객체는 키와 값으로 구성된 속성들의 집합을 의미하는 자료형
1. 객체 접근 방법 : 객체는 대괄호 연산자나 마침표 연산자로 접근할 수 있습니다

```
형식
객체["키"] = 값;
객체.키 = 값;
```

3. 객체 속성 추가 또는 삭제하기 : 객체의 속성에 접근해서 새로운 값을 할당할 때, 존재하지 않는 키라면 새로운 속성이 추가됩니다
   그리고 delete 키워드로 속성에 접근하면 기존 속성이 삭제됩니다

```
형식
delete 객체.키;
```

4. 객체의 특성 : 객체는 기본 자료형과는 다르게 할당된 변수가 값을 직접 가지고 있는 것이 아니라 데이터가 위치한 주소 값을 가지고 있습니다
   따라서 같은 주소 값을 공유하는 변수는 주소 값의 데이터가 변경되면 동시에 값이 변경됩니다 이런 현상을 얕은 복사라고 합니다

5. 표준 내장 객체

   - String : 기본 자료형 중 문자열과 관련 있는 속성과 메서드가 정의된 객체
   - Array : 기본 자료형 중 배열과 관련 있는 속성과 메서드가 정의된 객체
   - Date : 날짜 및 시간과 관련 있는 속성과 메서드가 정의된 객체
   - Math : 수학 연산과 관련 있는 속성과 메서드가 정의된 객체

6. 브라우저 객체 모델 : (BOM, Browser Object Model)은 웹브라우저에서 제공하는 객체로 브라우저를 제어할 수 있는 여러 기능이 포함
   - window, document, location, history, navigator, screen

## 셀프체크

1. 다음 중 obj 변수에 할당된 객체의 속성과 값이 다른 하나를 고르세요. 정답 3번

①

const obj = {name:"철수"};

②

const obj = {};
obj.name = "철수";

③

const obj = {name:"철수", age:20};
delete obj.name;

④

cosnt obj = {name:"영희"};
obj.name = "철수";

⑤

const obj = {};
const obj2 = obj;
obj2.name = "철수";

2. 버튼을 클릭하면 사용자의 모니터 화면에 가로 500px, 세로 300px 크기로 팝업창이 열리고, 팝업창에는 구글 사이트가 표시되도록 코드를 작성해 보세요.

답 : <button onclick="window.open('https://www.google.co.kr/','google','width=500,height=300,left=10,top=10')">구글</button>
답 :
<button onclick="popup()">구글</button>

```javascript
function popup() {
  const _width = 500;
  const _height = 300;
  const popupX = (screen.width - _width) / 2;
  const popupY = (screen.height - _height) / 2;
  window.open(
    "https://www.google.co.kr/",
    "google2",
    "width=500,height=300,left=" + popupX + ",top=" + popupY
  );
  console.log(popupX);
  console.log(popupY);
}
```

정답 : <button onclick="popup2()">구글</button>

```javascript
function popup2() {
  const left = (screen.availWidth - 500) / 2 + window.screenX;
  const top = (screen.availHeight - 300) / 2;
  window.open(
    "https://google.com",
    "popup",
    "width=500, height=300, left=" + left + ", top=" + top
  );
  console.log(window.screenX);
}
```
