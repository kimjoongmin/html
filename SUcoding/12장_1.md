# 12장 문서 객체 모델과 이벤트 다루기

html 구성 요소들을 다루는 객체를 문서 객체 모델(BOM, Browser Object Model)이라고 합니다

## 문서 객체 모델 이해하기

### 문서 객체 모델이 생성되는 방식

문서 객체 모델은 나무를 뒤집어 놓은 형태의 자료구조인 tree 구조를 가집니다 이름 가리켜 DOM 트리

- 노드 : document 객체 하위에 html 태그 요소, 속성, 텍스트, 주석 등이 트리형태로 구성 되는것들
- document 는 노드가 아니라 객체이므로 html **루트 노드**

### 노드 타입 살펴보기

- 문서 노드, 요소 노드, 속성 노드, 텍스트 노드, 주석 노드

1분 퀴즈

1. 다음 중 문서 객체 모델에 대한 설명으로 올바르지 않은 것을 고르세요. 3

   ① 문서 객체 모델은 HTML 구성 요소를 객체화한 모델 구조를 의미합니다.

   ② 문서 객체 모델은 웹 브라우저가 HTML 문서를 해석하는 과정에서 생성됩니다.

   ③ 문서 객체 모델은 자바스크립트 언어 사양에 내장되어 있는 객체 모델입니다.

   ④ 문서 객체 모델을 조작해서 웹 브라우저에 표시되는 화면에 새로운 요소를 추가하거나 기존 구성 요소를 변경할 수 있습니다.

   ⑤ 자바스크립트는 웹 브라우저에 화면이 표시된 후에 문서 객체 모델을 조작할 수 있습니다.

`문서 객체 모델은 웹 브라우저에서 생성되므로 자바스크립트 언어 사양에는 포함되지 않습니다.`

## 노드 선택하기

자바스크립트로 html 문서를 조작할 때 가장 먼저 할 일은 document 객체로 조작하려고 하는 문서 객체 모델의 노드를 선택하는 겁니다. 노드는 문서 노드부터 주석 노드까지 여러 타입이 있지만, 자바스크립트는 주로 노드를 선택해 조작합니다.

### 속성으로 노드 선택하기

- parentElement : 부모 요소 노드를 반환
- children : 자식 요소 노드를 반환
- firstElementChild : 첫 번째 자식 요소 노드를 반환
- lastElementChild : 마지막 자식 요소 노드를 반환
- previousElementSibling : 이전 요소 노드를 반환
- nextElementSibling : 다음 요소 노드를 반환

### 메서드로 노드 선택하기

- 속성값과 태그명 사용하기 - get 메서드
  - getElementById()
  - getElementsByClassName()
  - getElementsByTagName()

<a href="./080313-main/080313-main/12/02/getElement.html" target="_blank">예제 코드</a>

```html
<h1 id="title">title</h1>
<p class="text">text-1</p>
<p class="text">text-2</p>
<script>
  // id 속성값이 title인 요소 노드 1개 선택하기
  const el = document.getElementById("title");
  console.log(el);
  // class 속성값이 text인 요소 노드 모두 선택하기
  const classEl = document.getElementsByClassName("text");
  console.log(classEl);
  // p 태그에 해당하는 요소 노드 모두 선택하기
  const tagEl = document.getElementsByTagName("p");
  console.log(tagEl);
</script>
```

HTMLCollection 객체는 유사 배열이라서 다음 코드 처럼 배열의 인덱스로 요소에 하나씩 접근할 수 있다.

```javascript
const classEl = document.getElementsByClassName("text");
console.log(classEl[0]);
console.log(classEl[1]);
const tagEl = document.getElementsByTagName("p");
console.log(tagEl[0]);
console.log(tagEl[1]);
```

_유사 배열 : 여러개의 노드를 선택하는 document객체의 속성이나 메서드를 사용하다 보면 선택된 노드들이 HTMLCollection 객체나 nodeList 객체 등에 담겨 반환되는 것을 볼 수 있습니다. 출력 형태를 보면 마치 배열처럼 보이지만, 배열 자료형에는 없는 여러 객체 속성을 가지고 있습니다. 그래서 자바스크립트에서는 이런 객체를 배열과 비슷하게 보인다고해서 **유사 배열**이라고 합니다_

- CSS 선택자 사용하기 - query 메서드
  - querySelector() : css 선택자에 해당하는 노드를 1개만 선택
  - querySelectorAll() : css 선택자에 해당하는 노드를 모두 선택

<a href="./080313-main/080313-main/12/02/query.html" target="_blank">예제 코드</a>

```html
<div class="box-1">
  <p class="text">text-1</p>
  <p class="text">text-2</p>
</div>
<div class="box-2">
  <p class="text">text-3</p>
  <p class="text">text-4</p>
</div>
```

```javascript
//class 속성값이 box-1인 요소 노드를 선택하려면
const el1 = document.querySelector(".box-1");
//class 속성값이 box-1인 요소의 하위에 있는 p 태그
//getElementsByClassName() 메서드
const el2 = document.getElementsByClassName("box-1")[0].children;
//querySelector() 메서드
const el3 = document.querySelectorAll(".box-1 .text");
```

메서드의 매개변수에 css 선택자를 전달하니 더 간단하게 원하는 노드를 선택할 수 있습니다.
단, 여러 개의 노드를 선택할 때 getElementsByClassName()메서드와 getElementsByTagName() 메서드는
HTMLCollection 객체에 담아 반환했지만, querySelectorAll()메서드는 NodeList 객체에 담아 반환합니다.

1분 퀴즈

2. 다음 코드에서 p 요소 노드를 선택하는 방법으로 올바르지 않은 것을 고르세요.

```html
<body>
  <div class="box1">
    <p id="text">Select Text</p>
  </div>
</body>
```

① document.getElementById("#text")

② document.querySelector("p")

③ document.querySelector(".box1 > p")

④ document.querySelectorAll("p")[0]

⑤ document.querySelectorAll("div")[0].firstElementChild

`1번 document.getElementById() 메서드는 id 속성값을 # 없이 문자열로 입력합니다`

## 노드 조작하기

### 콘텐츠 조작하기

- textContent : 요소 노드의 모든 텍스트에 접근
- innerText : 요소 노드의 텍스트 중 웹브라우저에 표시되는 텍스트에만 접근
- innerHTML : 요소 노드의 텍스트 중 HTML 태그를 포함한 텍스트에만 접근

<a href="./080313-main/080313-main/12/03/content.html" target="_blank">예제 코드</a>

```html
<p id="title">Hello, <span style="display:none">Javascript!</span></p>
```

```javascript
document.querySelector("#title").textContent; //Hello, Javascript!
document.querySelector("#title").innerText; //Hello,
document.querySelector("#title").innerHTML; //Hello, <span style="display:none">Javascript!</span>
```

<a href="./080313-main/080313-main/12/03/content_set.html" target="_blank">예제 코드</a>

```html
<p id="textContent"></p>
<p id="innerText"></p>
<p id="innerHTML"></p>
```

```javascript
document.querySelector("#textContent").textContent =
  "<strong>textContent</strong> 속성"; //<strong>textContent</strong> 속성
document.querySelector("#innerText").innerText =
  "<strong>innerText</strong> 속성"; //<strong>innerText</strong> 속성
document.querySelector("#innerHTML").innerHTML =
  "<strong>innerHTML</strong> 속성"; //innerHTML 속성
```

### 스타일 조작하기

```
형식
노드.style.<css속성명> = <속성값>;
```

<a href="./080313-main/080313-main/12/03/style_set_1.html" target="_blank">예제 코드</a>

```html
<p id="text">text</p>
```

```javascript
const el = document.querySelector("p"); // 노드 선택하기
el.style.color = "red";
```

`카멜표기법 : background-color = backgroundColor`

- classList 속성
  - add(), remove(), toggle()

```
형식
<노드>.classList.add("class 속성값") //추가
<노드>.classList.remove("class 속성값") //삭제
<노드>.classList.toggle("class 속성값") //추가와 삭제 반복
```

<a href="./080313-main/080313-main/12/03/classList_add.html" target="_blank">add 예제 코드</a><br>
<a href="./080313-main/080313-main/12/03/classList_remove.html" target="_blank">remove 예제 코드</a><br>
<a href="./080313-main/080313-main/12/03/classList_toggle.html" target="_blank">toggle 예제 코드</a><br>

```html
<p id="text">text</p>
```

```javascript
const el = document.querySelector("#text"); //노드 선택
el.classList.add("active", "on"); //한번에 추가
el.classList.remove("active");
setInterval(() => {
  el.classList.toggle("active");
}, 3000);
```

### 데이터 속성 조작하기

dataset 속성은 html 문서에서 data-\* 속성을 가져오거나 지정합니다.

<a href="./080313-main/080313-main/12/03/dataset.html" target="_blank">add 예제 코드</a><br>

```html
<button data-cnt="10">가방 구매</button>
<button data-cnt="0">신발 구매</button>
<script>
  const buttonEls = document.querySelectorAll("button");
  buttonEls.forEach((e) => {
    console.log(e.dataset);
    //console.log(e.dataset.cnt); //10,0
    // e.dataset.cnt = 50; // data-cnt="50"
  });
</script>
```

<img alt="" class="w100" src="https://thebook.io/img/080313/473.jpg">

### 메서드로 속성 조작하기

- <노드>.getAttribute("속성명"); : 속성명을 가져옵니다
- <노드>.setAttribute("속성명", "속성값"); : 속성값을 설정합니다
- <노드>.removeAttribute("속성명") : 속성을 삭제합니다

<a href="./080313-main/080313-main/12/03/attribute.html" target="_blank">getAttribute, setAttribute, removeAttribute 예제 코드</a><br>

<a href="https://www.naver.com" class="test1">TEST 네이버</a>

```javascript
//getAttribute()
const el = document.querySelector(".test1");
const _href = el.getAttribute("href");
console.log(_href);

//setAttribute()
el.setAttribute("href", "https://www.daum.net");
el.innerText = "다음";

el.setAttribute("target", "_blank");
console.log(el);

setTimeout(() => {
  el.removeAttribute("target");
  console.log(el);
}, 1000);
```

- getAttribute() 메서드와 setAttribute() 메서드는 모든 속성의 상위 메서드라서 ClassList 속성이나 dataset 속성으로 하는 조작을 전부 할 수 있습니다

<a href="./080313-main/080313-main/12/03/attribute.html" target="_blank">getAttribute, setAttribute 예제 코드</a><br>

<a href="https://www.naver.com" class="test2" data-link="네이버">TEST 네이버</a>

```javascript
const el = document.querySelector(".test2");
// el.classList.add("active");
el.setAttribute("class", "test2 active");
// el.dataset.link = "네이버2";
el.setAttribute("data-link", "네이버2");
el.removeAttribute("class");
//classList 속성의 remove()속성과 같지만 remove() 메서드는 기존 속성을 보존하면서
//매개변수로 전달된 속성만 삭제. removeAttribute() 메서드는 속성 자체 삭제
```

1분 퀴즈 3. 다음과 같은 코드가 있을 때, p 태그의 fz20 클래스 속성을 삭제하고, sample text를 change text로 변경하고 싶다면 (가), (나)에 들어갈 내용으로 맞게 짝지어진 것을 고르세요.
classList.remove("fz20")
innerText

```html
<p id="text" class="red-color fz20">sample text</p>
<script>
  const pEl = document.querySelector("#text");
  pEl.(가) = "change text";
  pEl.(나);
</script>
```

(가) - (나)

① dataset - removeClass("fz20")

② dataset - setAttribute("fz20")

③ innerHTML - toggleClass()

④ innerTex - classList.remove("fz20")

⑤ textContent - removeClass("fz20")

`④ 해설_ textContent/innerHTML/innerText 속성을 사용하면 콘텐츠를 변경할 수 있습니다. 그리고 classList 객체의 remove() 메서드를 사용하면 클래스를 삭제할 수 있습니다. removeClass() 메서드는 실제로는 없는 메서드입니다. 하지만 마치 메서드 이름처럼 그럴 듯해 보여서 자주 헷갈리니 잘 기억해 주세요.`
